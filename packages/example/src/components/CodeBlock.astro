---
interface Props {
  code: string;
  label?: string;
}

const { code, label = "HTML" } = Astro.props;
---

<div class="example-code">
  <div class="code-header">
    <span class="code-label">{label}</span>
    <button class="copy-btn" data-code={code}>
      <i class="fa-solid fa-copy"></i> Copy
    </button>
  </div>
  <pre><code>{code}</code></pre>
</div>

<script>
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', async (e) => {
      const button = e.currentTarget as HTMLElement;
      const code = button.getAttribute('data-code');
      
      if (code) {
        try {
          await navigator.clipboard.writeText(code);
          button.classList.add('copied');
          button.innerHTML = '<i class="fa-solid fa-check"></i> Copied!';
          
          setTimeout(() => {
            button.classList.remove('copied');
            button.innerHTML = '<i class="fa-solid fa-copy"></i> Copy';
          }, 2000);
        } catch (err) {
          console.error('Failed to copy:', err);
        }
      }
    });
  });
</script>

