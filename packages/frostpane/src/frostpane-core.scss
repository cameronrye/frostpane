/*!
 * Frostpane Core v1.1.0
 * Minimal glass effect library - just the essentials
 * Copyright (c) 2025 Cameron Rye
 * Licensed under MIT (https://github.com/cameronrye/frostpane/blob/main/LICENSE)
 */

// ============================================================================
// Frostpane Core - Minimal Glass Effect Library
// This is the minimal version with ONLY the glass effect
// No utilities, no form components, just pure glass
// ============================================================================

:root {
  // ============================================================================
  // Glass Effect Variables
  // ============================================================================
  
  // Glass background and effects
  --fp-glass-bg: rgba(255, 255, 255, 0.25);
  --fp-glass-highlight: rgba(255, 255, 255, 0.75);
  --fp-glass-blur: 4px;
  
  // Glass border radius
  --fp-glass-border-radius: 2rem;
  --fp-glass-border-radius-rounded: 3rem;
  --fp-glass-border-radius-small: 0.5rem;
  
  // Glass shadows
  --fp-glass-shadow-color-primary: rgba(0, 0, 0, 0.2);
  --fp-glass-shadow-color-secondary: rgba(0, 0, 0, 0.1);
  --fp-glass-shadow-blur-primary: 6px;
  --fp-glass-shadow-blur-secondary: 20px;
  --fp-glass-shadow-offset-x: 0;
  --fp-glass-shadow-offset-y: 6px;
  
  // Glass filter effects
  --fp-glass-saturate: 120%;
  --fp-glass-brightness: 1.15;
  
  // Glass inset highlights
  --fp-glass-inset-highlight-offset: 1px;
  --fp-glass-inset-highlight-blur: 0;
  --fp-glass-inset-glow-blur: 5px;
  
  // ============================================================================
  // Minimal Content Variables (for .glass class)
  // ============================================================================
  
  --fp-content-padding-x: 1.5rem;
  --fp-content-padding-y: 0.5rem;
  --fp-content-gap: 1rem;
  
  // ============================================================================
  // Transition Variables
  // ============================================================================
  
  --fp-transition-duration: 0.4s;
  --fp-transition-timing: cubic-bezier(0.4, 0.0, 0.2, 1);
}

// ============================================================================
// Dark Mode Support
// ============================================================================

// Automatic dark mode based on system preference
@media (prefers-color-scheme: dark) {
  :root {
    --fp-glass-bg: rgba(0, 0, 0, 0.3);
    --fp-glass-highlight: rgba(255, 255, 255, 0.15);
    --fp-glass-shadow-color-primary: rgba(0, 0, 0, 0.4);
    --fp-glass-shadow-color-secondary: rgba(0, 0, 0, 0.2);
  }
}

// Explicit dark theme via data attribute
[data-theme="dark"] {
  --fp-glass-bg: rgba(0, 0, 0, 0.3);
  --fp-glass-highlight: rgba(255, 255, 255, 0.15);
  --fp-glass-shadow-color-primary: rgba(0, 0, 0, 0.4);
  --fp-glass-shadow-color-secondary: rgba(0, 0, 0, 0.2);
}

// Explicit light theme via data attribute
[data-theme="light"] {
  --fp-glass-bg: rgba(255, 255, 255, 0.25);
  --fp-glass-highlight: rgba(255, 255, 255, 0.75);
  --fp-glass-shadow-color-primary: rgba(0, 0, 0, 0.2);
  --fp-glass-shadow-color-secondary: rgba(0, 0, 0, 0.1);
}

// ============================================================================
// Accessibility - Respect user motion preferences
// ============================================================================
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

// ============================================================================
// Glass Container - Core Component
// ============================================================================

.glass-container {
  position: relative;
  display: flex;
  align-items: center;
  background: transparent;
  border-radius: var(--fp-glass-border-radius);
  overflow: hidden;
  flex: 1 1 auto;
  box-shadow: var(--fp-glass-shadow-offset-x) var(--fp-glass-shadow-offset-y) var(--fp-glass-shadow-blur-primary) var(--fp-glass-shadow-color-primary),
              var(--fp-glass-shadow-offset-x) var(--fp-glass-shadow-offset-y) var(--fp-glass-shadow-blur-secondary) var(--fp-glass-shadow-color-secondary);
  color: inherit;
  transition: transform var(--fp-transition-duration) var(--fp-transition-timing),
              opacity var(--fp-transition-duration) var(--fp-transition-timing),
              box-shadow var(--fp-transition-duration) var(--fp-transition-timing);

  // Glass filter layer - backdrop blur and SVG filter effects
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 0;
    pointer-events: none;

    // Fallback for browsers without backdrop-filter support
    @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
      background: var(--fp-glass-bg);
      opacity: 0.9;
    }

    @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
      -webkit-backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      filter: url(#lensFilter);
    }
  }

  // Glass overlay + specular layer - background tint and highlights
  &::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 1;
    background: var(--fp-glass-bg);
    box-shadow: inset var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-blur) var(--fp-glass-highlight),
                inset 0 0 var(--fp-glass-inset-glow-blur) var(--fp-glass-highlight);
  }
}

// Glass container modifiers
.glass-container--rounded {
  border-radius: var(--fp-glass-border-radius-rounded);
}

.glass-container--large {
  flex: 1 1 auto;
}

.glass-container--medium {
  flex: 1 1 auto;
  max-width: 600px;
}

.glass-container--small {
  flex: 0 1 auto;
}

// ============================================================================
// Glass - Single-Class Option (Simplified API)
// ============================================================================

.glass {
  // Combine container and content in one class for simpler usage
  position: relative;
  display: flex;
  align-items: center;
  background: transparent;
  border-radius: var(--fp-glass-border-radius);
  overflow: hidden;
  box-shadow: var(--fp-glass-shadow-offset-x) var(--fp-glass-shadow-offset-y) var(--fp-glass-shadow-blur-primary) var(--fp-glass-shadow-color-primary),
              var(--fp-glass-shadow-offset-x) var(--fp-glass-shadow-offset-y) var(--fp-glass-shadow-blur-secondary) var(--fp-glass-shadow-color-secondary);
  color: inherit;
  padding: var(--fp-content-padding-y) var(--fp-content-padding-x);
  gap: var(--fp-content-gap);
  transition: transform var(--fp-transition-duration) var(--fp-transition-timing),
              opacity var(--fp-transition-duration) var(--fp-transition-timing),
              box-shadow var(--fp-transition-duration) var(--fp-transition-timing);

  // Glass filter layer - backdrop blur and SVG filter effects
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 0;
    pointer-events: none;

    // Fallback for browsers without backdrop-filter support
    @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
      background: var(--fp-glass-bg);
      opacity: 0.9;
    }

    @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
      -webkit-backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      filter: url(#lensFilter);
    }
  }

  // Glass overlay + specular layer - background tint and highlights
  &::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 1;
    background: var(--fp-glass-bg);
    box-shadow: inset var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-blur) var(--fp-glass-highlight),
                inset 0 0 var(--fp-glass-inset-glow-blur) var(--fp-glass-highlight);
  }

  // Content should be above pseudo-elements
  > * {
    position: relative;
    z-index: 2;
  }
}

// Glass modifiers
.glass--rounded {
  border-radius: var(--fp-glass-border-radius-rounded);
}

.glass--small {
  padding: 0.25rem 0.5rem;
  font-size: 0.875rem;
}

.glass--large {
  padding: 1.5rem 2rem;
  font-size: 1.125rem;
}

// ============================================================================
// Glass Content - Content Wrapper (for two-class API)
// ============================================================================

.glass-content {
  position: relative;
  z-index: 2; // Above ::before (0) and ::after (1)
  display: flex;
  flex: 1 1 auto;
  align-items: center;
  justify-content: space-around;
  padding: var(--fp-content-padding-y) var(--fp-content-padding-x);
  gap: var(--fp-content-gap);
  flex-wrap: wrap;
}

// ============================================================================
// Component Variants - Pre-configured for Common Use Cases
// ============================================================================

.glass-card {
  // Card variant - optimized for content cards
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  background: transparent;
  border-radius: var(--fp-glass-border-radius);
  overflow: hidden;
  padding: 1.5rem;
  gap: 1rem;
  max-width: 400px;
  box-shadow: var(--fp-glass-shadow-offset-x) calc(var(--fp-glass-shadow-offset-y) * 1.3) calc(var(--fp-glass-shadow-blur-primary) * 1.3) var(--fp-glass-shadow-color-primary),
              var(--fp-glass-shadow-offset-x) var(--fp-glass-shadow-offset-y) calc(var(--fp-glass-shadow-blur-secondary) * 1.3) var(--fp-glass-shadow-color-secondary);
  color: inherit;
  transition: transform var(--fp-transition-duration) var(--fp-transition-timing),
              box-shadow var(--fp-transition-duration) var(--fp-transition-timing);

  // Slightly more blur for cards
  --fp-glass-blur: 6px;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 0;
    pointer-events: none;

    @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
      background: var(--fp-glass-bg);
      opacity: 0.9;
    }

    @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
      -webkit-backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      filter: url(#lensFilter);
    }
  }

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 1;
    background: var(--fp-glass-bg);
    box-shadow: inset var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-blur) var(--fp-glass-highlight),
                inset 0 0 var(--fp-glass-inset-glow-blur) var(--fp-glass-highlight);
  }

  > * {
    position: relative;
    z-index: 2;
  }
}

.glass-modal {
  // Modal variant - stronger effect for overlays
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: transparent;
  border-radius: var(--fp-glass-border-radius);
  overflow: hidden;
  padding: 2rem;
  gap: 1.5rem;
  max-width: 600px;
  box-shadow: var(--fp-glass-shadow-offset-x) calc(var(--fp-glass-shadow-offset-y) * 3) calc(var(--fp-glass-shadow-blur-primary) * 2) var(--fp-glass-shadow-color-primary),
              var(--fp-glass-shadow-offset-x) var(--fp-glass-shadow-offset-y) calc(var(--fp-glass-shadow-blur-secondary) * 2) var(--fp-glass-shadow-color-secondary);
  color: inherit;
  transition: transform var(--fp-transition-duration) var(--fp-transition-timing),
              opacity var(--fp-transition-duration) var(--fp-transition-timing);

  // Stronger effect for modals
  --fp-glass-bg: rgba(255, 255, 255, 0.35);
  --fp-glass-blur: 8px;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 0;
    pointer-events: none;

    @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
      background: var(--fp-glass-bg);
      opacity: 0.9;
    }

    @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
      -webkit-backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      filter: url(#lensFilter);
    }
  }

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 1;
    background: var(--fp-glass-bg);
    box-shadow: inset var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-blur) var(--fp-glass-highlight),
                inset 0 0 var(--fp-glass-inset-glow-blur) var(--fp-glass-highlight);
  }

  > * {
    position: relative;
    z-index: 2;
  }
}

.glass-nav {
  // Navigation variant - subtle effect for nav bars
  position: relative;
  display: flex;
  align-items: center;
  background: transparent;
  border-radius: var(--fp-glass-border-radius-small);
  overflow: hidden;
  padding: 0.5rem 1.5rem;
  gap: 1.5rem;
  box-shadow: var(--fp-glass-shadow-offset-x) calc(var(--fp-glass-shadow-offset-y) * 0.3) calc(var(--fp-glass-shadow-blur-primary) * 0.5) var(--fp-glass-shadow-color-primary);
  color: inherit;
  transition: transform var(--fp-transition-duration) var(--fp-transition-timing);

  // Subtle effect for navigation
  --fp-glass-bg: rgba(255, 255, 255, 0.2);
  --fp-glass-blur: 3px;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 0;
    pointer-events: none;

    @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
      background: var(--fp-glass-bg);
      opacity: 0.9;
    }

    @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
      -webkit-backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      filter: url(#lensFilter);
    }
  }

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 1;
    background: var(--fp-glass-bg);
    box-shadow: inset var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-blur) var(--fp-glass-highlight),
                inset 0 0 var(--fp-glass-inset-glow-blur) var(--fp-glass-highlight);
  }

  > * {
    position: relative;
    z-index: 2;
  }
}

.glass-panel {
  // Panel variant - subtle background panel
  position: relative;
  display: flex;
  flex-direction: column;
  background: transparent;
  border-radius: var(--fp-glass-border-radius);
  overflow: hidden;
  padding: 2rem;
  gap: 1.5rem;
  box-shadow: var(--fp-glass-shadow-offset-x) var(--fp-glass-shadow-offset-y) var(--fp-glass-shadow-blur-primary) var(--fp-glass-shadow-color-primary);
  color: inherit;

  // Very subtle background
  --fp-glass-bg: rgba(255, 255, 255, 0.15);
  --fp-glass-blur: 2px;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 0;
    pointer-events: none;

    @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
      background: var(--fp-glass-bg);
      opacity: 0.9;
    }

    @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
      -webkit-backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      backdrop-filter: blur(var(--fp-glass-blur)) saturate(var(--fp-glass-saturate)) brightness(var(--fp-glass-brightness));
      filter: url(#lensFilter);
    }
  }

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    z-index: 1;
    background: var(--fp-glass-bg);
    box-shadow: inset var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-offset) var(--fp-glass-inset-highlight-blur) var(--fp-glass-highlight),
                inset 0 0 var(--fp-glass-inset-glow-blur) var(--fp-glass-highlight);
  }

  > * {
    position: relative;
    z-index: 2;
  }
}

